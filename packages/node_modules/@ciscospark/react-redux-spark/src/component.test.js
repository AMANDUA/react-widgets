import React from 'react';
import renderer from 'react-test-renderer';
import {Provider} from 'react-redux';

import {createMockStore} from '@ciscospark/react-redux-spark-fixtures';

import SparkComponent from './component';

describe('spark component', () => {
  let sparkInstance, store, component;

  beforeEach(() => {
    store = createMockStore();
    sparkInstance = {
      authorization: 'authorization',
      logger: 'logger',
      people: 'people',
      phone: 'phone',
      rooms: 'rooms',
      internal: {
        conversation: 'conversation',
        feature: 'feature',
        flag: 'flag',
        mercury: 'mercury',
        presence: 'presence',
        search: 'search',
        team: 'team'
      }
    };
    component = renderer.create(
      <Provider store={store}>
        <SparkComponent
          spark={sparkInstance}
          storeSparkInstance={jest.fn()}
          updateSparkStatus={jest.fn()}
        />
      </Provider>
    );
  });

  it('renders correctly', () => {
    expect(component.toTree()).toMatchSnapshot();
  });

  afterEach(() => {
    store = null;
    sparkInstance = null;
    component = null;
  });
});
