import React from 'react';
import {Input} from '@momentum-ui/react';
import * as AdaptiveCard from 'adaptivecards';
import classnames from 'classnames';

import {renderCardElement} from '@ciscospark/react-component-utils';

class MDTextInput extends AdaptiveCard.TextInput {
  constructor(addChildNode) {
    super();
    this.addChildNode = addChildNode;
  }

  get value() {
    return this._value;
  }

  set value(newValue) {
    this._value = newValue;
  }

  internalRender() {
    this.value = this.defaultValue || '';
    const inputStyles = {
      0: 'Text',
      1: 'Text',
      2: 'Text',
      3: 'Email'
    };

    this._inputElement = document.createElement('div');
    const jsx = (
      <Input
        label={this.title}
        value={this.value}
        maxLength={this.maxLength}
        placeholder={this.placeholder}
        type={inputStyles[this.style].toLowerCase()}
        multiline={!!this.isMultiline}
        className={classnames('ac-input', 'ac-textInput', {'ac-multiline': !!this.isMultiline})}
        onChange={(event) => {
          this.value = event.target.value;
        }}
        clear
      />
    );

    renderCardElement(jsx, this._inputElement, this.addChildNode);

    return this._inputElement;
  }
}

export default MDTextInput;
